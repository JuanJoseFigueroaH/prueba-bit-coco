{"remainingRequest":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js!C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\project-corhuila\\frontend\\src\\components\\Ingreso.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\src\\components\\Ingreso.vue","mtime":1562858965834},{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642907172876},{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1642907173684},{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1642907173882},{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642907172876},{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1642907175054}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      dialog: false,\n      search: '',\n      ingresos: [],\n      headers: [{\n        text: 'Opciones',\n        value: 'opciones',\n        sortable: false\n      }, {\n        text: 'Usuario',\n        value: 'usuario.nombre',\n        sortable: true\n      }, {\n        text: 'Proveedor',\n        value: 'persona.nombre',\n        sortable: true\n      }, {\n        text: 'Tipo Comprobante',\n        value: 'tipo_comprobante',\n        sortable: true\n      }, {\n        text: 'Serie comprobante',\n        value: 'serie_comprobante',\n        sortable: false\n      }, {\n        text: 'Número comprobante',\n        value: 'num_comprobante',\n        sortable: false\n      }, {\n        text: 'Fecha',\n        value: 'createdAt',\n        sortable: false\n      }, {\n        text: 'Impuesto',\n        value: 'impuesto',\n        sortable: false\n      }, {\n        text: 'Total',\n        value: 'total',\n        sortable: false\n      }, {\n        text: 'Estado',\n        value: 'estado',\n        sortable: false\n      }],\n      _id: '',\n      persona: '',\n      personas: [],\n      tipo_comprobante: '',\n      comprobantes: ['BOLETA', 'FACTURA', 'TICKET', 'GUIA'],\n      serie_comprobante: '',\n      num_comprobante: '',\n      impuesto: 0.18,\n      codigo: '',\n      cabeceraDetalles: [{\n        text: 'Borrar',\n        value: 'borrar',\n        sortable: false\n      }, {\n        text: 'Artículo',\n        value: 'articulo',\n        sortable: false\n      }, {\n        text: 'Cantidad',\n        value: 'cantidad',\n        sortable: false\n      }, {\n        text: 'Precio',\n        value: 'precio',\n        sortable: false\n      }, {\n        text: 'Sub Total',\n        value: 'subtotal',\n        sortable: false\n      }],\n      detalles: [],\n      verNuevo: 0,\n      errorArticulo: null,\n      total: 0,\n      totalParcial: 0,\n      totalImpuesto: 0,\n      articulos: [],\n      texto: '',\n      cabeceraArticulos: [{\n        text: 'Seleccionar',\n        value: 'seleccionar',\n        sortable: false\n      }, {\n        text: 'Código',\n        value: 'codigo',\n        sortable: false\n      }, {\n        text: 'Nombre',\n        value: 'nombre',\n        sortable: true\n      }, {\n        text: 'Categoría',\n        value: 'categoria.nombre',\n        sortable: true\n      }, {\n        text: 'Stock',\n        value: 'stock',\n        sortable: false\n      }, {\n        text: 'Precio Venta',\n        value: 'precio_venta',\n        sortable: false\n      }, {\n        text: 'Descripción',\n        value: 'descripcion',\n        sortable: false\n      }, {\n        text: 'Estado',\n        value: 'estado',\n        sortable: false\n      }],\n      verDetalle: 0,\n      valida: 0,\n      validaMensaje: [],\n      adModal: 0,\n      adAccion: 0,\n      adNombre: '',\n      adId: ''\n    };\n  },\n  computed: {\n    calcularTotal: function calcularTotal() {\n      var resultado = 0.0;\n\n      for (var i = 0; i < this.detalles.length; i++) {\n        resultado = resultado + this.detalles[i].cantidad * this.detalles[i].precio;\n      }\n\n      return resultado;\n    }\n  },\n  watch: {\n    dialog: function dialog(val) {\n      val || this.close();\n    }\n  },\n  created: function created() {\n    this.listar();\n    this.selectPersona();\n  },\n  methods: {\n    selectPersona: function selectPersona() {\n      var me = this;\n      var personaArray = [];\n      var header = {\n        \"Token\": this.$store.state.token\n      };\n      var configuracion = {\n        headers: header\n      };\n      axios.get('persona/listProveedores', configuracion).then(function (response) {\n        personaArray = response.data;\n        personaArray.map(function (x) {\n          me.personas.push({\n            text: x.nombre,\n            value: x._id\n          });\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    buscarCodigo: function buscarCodigo() {\n      var me = this;\n      me.errorArticulo = null;\n      var header = {\n        \"Token\": this.$store.state.token\n      };\n      var configuracion = {\n        headers: header\n      };\n      axios.get('articulo/queryCodigo?codigo=' + this.codigo, configuracion).then(function (response) {\n        me.agregarDetalle(response.data);\n      }).catch(function (error) {\n        me.errorArticulo = 'No existe el artículo.';\n      });\n    },\n    agregarDetalle: function agregarDetalle(data) {\n      this.errorArticulo = null;\n\n      if (this.encuentra(data._id) == true) {\n        this.errorArticulo = 'El artículo ya ha sido agregado.';\n      } else {\n        this.detalles.push({\n          _id: data._id,\n          articulo: data.nombre,\n          cantidad: 1,\n          precio: data.precio_venta\n        });\n        this.codigo = '';\n      }\n    },\n    encuentra: function encuentra(id) {\n      var sw = 0;\n\n      for (var i = 0; i < this.detalles.length; i++) {\n        if (this.detalles[i]._id == id) {\n          sw = true;\n        }\n      }\n\n      return sw;\n    },\n    eliminarDetalle: function eliminarDetalle(arr, item) {\n      var i = arr.indexOf(item);\n\n      if (i != -1) {\n        arr.splice(i, 1);\n      }\n    },\n    listarArticulos: function listarArticulos() {\n      var me = this;\n      var header = {\n        \"Token\": this.$store.state.token\n      };\n      var configuracion = {\n        headers: header\n      };\n      axios.get('articulo/list?valor=' + this.texto, configuracion).then(function (response) {\n        me.articulos = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    mostrarModalArticulos: function mostrarModalArticulos() {\n      this.dialog = 1;\n    },\n    listarDetalles: function listarDetalles(id) {\n      var me = this;\n      var header = {\n        \"Token\": this.$store.state.token\n      };\n      var configuracion = {\n        headers: header\n      };\n      axios.get('ingreso/query?_id=' + id, configuracion).then(function (response) {\n        me.detalles = response.data.detalles;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    verIngreso: function verIngreso(item) {\n      this.limpiar();\n      this.tipo_comprobante = item.tipo_comprobante;\n      this.serie_comprobante = item.serie_comprobante;\n      this.num_comprobante = item.num_comprobante;\n      this.persona = item.persona._id;\n      this.impuesto = item.impuesto;\n      this.listarDetalles(item._id);\n      this.verNuevo = 1;\n      this.verDetalle = 1;\n    },\n    listar: function listar() {\n      var me = this;\n      var header = {\n        \"Token\": this.$store.state.token\n      };\n      var configuracion = {\n        headers: header\n      };\n      axios.get('ingreso/list', configuracion).then(function (response) {\n        me.ingresos = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    limpiar: function limpiar() {\n      this._id = '';\n      this.tipo_comprobante = '';\n      this.serie_comprobante = '';\n      this.num_comprobante = '';\n      this.impuesto = 0.18;\n      this.codigo = '';\n      this.total = 0;\n      this.totalParcial = 0;\n      this.totalImpuesto = 0;\n      this.detalles = [];\n      this.verNuevo = 0;\n      this.valida = 0;\n      this.validaMensaje = [];\n      this.verDetalle = 0;\n    },\n    validar: function validar() {\n      this.valida = 0;\n      this.validaMensaje = [];\n\n      if (!this.persona) {\n        this.validaMensaje.push('Seleccione un proveedor.');\n      }\n\n      if (!this.tipo_comprobante) {\n        this.validaMensaje.push('Seleccione un tipo de comprobante.');\n      }\n\n      if (!this.num_comprobante) {\n        this.validaMensaje.push('Ingrese el número del comprobante.');\n      }\n\n      if (!this.impuesto || this.impuesto < 0 || this.impuesto > 1) {\n        this.validaMensaje.push('Ingrese un impuesto válido.');\n      }\n\n      if (this.detalles.length <= 0) {\n        this.validaMensaje.push('Ingrese al menos un artículo al detalle');\n      }\n\n      if (this.validaMensaje.length) {\n        this.valida = 1;\n      }\n\n      return this.valida;\n    },\n    mostrarNuevo: function mostrarNuevo() {\n      this.verNuevo = 1;\n    },\n    ocultarNuevo: function ocultarNuevo() {\n      this.verNuevo = 0;\n      this.limpiar();\n    },\n    guardar: function guardar() {\n      var me = this;\n      var header = {\n        \"Token\": this.$store.state.token\n      };\n      var configuracion = {\n        headers: header\n      };\n\n      if (this.validar()) {\n        return;\n      } //Código para guardar\n\n\n      axios.post('ingreso/add', {\n        'persona': this.persona,\n        'usuario': this.$store.state.usuario._id,\n        'tipo_comprobante': this.tipo_comprobante,\n        'serie_comprobante': this.serie_comprobante,\n        'num_comprobante': this.num_comprobante,\n        'impuesto': this.impuesto,\n        'total': this.total,\n        'detalles': this.detalles\n      }, configuracion).then(function (response) {\n        me.limpiar();\n        me.close();\n        me.listar();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    activarDesactivarMostrar: function activarDesactivarMostrar(accion, item) {\n      this.adModal = 1;\n      this.adNombre = item.num_comprobante;\n      this.adId = item._id;\n\n      if (accion == 1) {\n        this.adAccion = 1;\n      } else if (accion == 2) {\n        this.adAccion = 2;\n      } else {\n        this.adModal = 0;\n      }\n    },\n    activarDesactivarCerrar: function activarDesactivarCerrar() {\n      this.adModal = 0;\n    },\n    activar: function activar() {\n      var me = this;\n      var header = {\n        \"Token\": this.$store.state.token\n      };\n      var configuracion = {\n        headers: header\n      };\n      axios.put('ingreso/activate', {\n        '_id': this.adId\n      }, configuracion).then(function (response) {\n        me.adModal = 0;\n        me.adAccion = 0;\n        me.adNombre = '';\n        me.adId = '';\n        me.listar();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    desactivar: function desactivar() {\n      var me = this;\n      var header = {\n        \"Token\": this.$store.state.token\n      };\n      var configuracion = {\n        headers: header\n      };\n      axios.put('ingreso/deactivate', {\n        '_id': this.adId\n      }, configuracion).then(function (response) {\n        me.adModal = 0;\n        me.adAccion = 0;\n        me.adNombre = '';\n        me.adId = '';\n        me.listar();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    close: function close() {\n      this.dialog = false;\n    }\n  }\n};",{"version":3,"sources":["Ingreso.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <v-layout align-start>\r\n        <v-flex>\r\n            <v-toolbar flat color=\"white\">\r\n                <v-toolbar-title>Ingresos</v-toolbar-title>\r\n                <v-divider\r\n                class=\"mx-2\"\r\n                inset\r\n                vertical\r\n                ></v-divider>\r\n                <v-spacer></v-spacer>\r\n                <v-text-field v-if=\"verNuevo==0\" class=\"text-xs-center\" v-model=\"search\" append-icon=\"search\" \r\n                label=\"Búsqueda\" single-line hide-details></v-text-field>\r\n                <v-spacer></v-spacer>\r\n                <v-btn color=\"primary\" v-if=\"verNuevo==0\" @click=\"mostrarNuevo()\" dark class=\"mb-2\">Nuevo</v-btn>\r\n                <v-dialog v-model=\"dialog\" max-width=\"1000px\">\r\n                    <v-card>\r\n                        <v-card-title> \r\n                            <span class=\"headline\">Seleccione un artículo</span>\r\n                        </v-card-title>            \r\n                        <v-card-text>\r\n                            <v-container grid-list-md>\r\n                                <v-layout wrap>\r\n                                    <v-flex xs12 sm12 md12 lg12 xl12>                                        \r\n                                        <v-text-field v-model=\"texto\" @keyup.enter=\"listarArticulos()\" class=\"text-xs-center\" append-icon=\"search\" \r\n                                        label=\"Búsqueda\"></v-text-field>\r\n                                        <template>\r\n                                            <v-data-table\r\n                                                :headers=\"cabeceraArticulos\"\r\n                                                :items=\"articulos\"\r\n                                                class=\"elevation-1\"\r\n                                            >\r\n                                                <template v-slot:items=\"props\">\r\n                                                <td class=\"justify-center layout px-0\">\r\n                                                    <v-icon\r\n                                                    small\r\n                                                    class=\"mr-2\"\r\n                                                    @click=\"agregarDetalle(props.item)\"\r\n                                                    >\r\n                                                    add\r\n                                                    </v-icon>                                                    \r\n                                                </td>\r\n                                                <td>{{ props.item.codigo }}</td>\r\n                                                <td>{{ props.item.nombre }}</td>\r\n                                                <td>{{ props.item.categoria.nombre }}</td>\r\n                                                <td>{{ props.item.stock }}</td>\r\n                                                <td>{{ props.item.precio_venta }}</td>\r\n                                                <td>{{ props.item.descripcion }}</td>\r\n                                                <td>\r\n                                                    <div v-if=\"props.item.estado\">\r\n                                                        <span class=\"blue--text\">Activo</span>\r\n                                                    </div>\r\n                                                    <div v-else>\r\n                                                        <span class=\"red--text\">Inactivo</span>\r\n                                                    </div>\r\n                                                </td>                \r\n                                                </template>\r\n                                            </v-data-table>\r\n                                        </template>\r\n                                    </v-flex>\r\n                                </v-layout>\r\n                            </v-container>\r\n                        </v-card-text>            \r\n                        <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                            <v-btn color=\"blue darken-1\" flat @click=\"close\">Cancelar</v-btn>\r\n                        </v-card-actions>\r\n                    </v-card>\r\n                </v-dialog>\r\n                <v-dialog v-model=\"adModal\" max-width=\"290\">\r\n                    <v-card>\r\n                        <v-card-title class=\"headline\" v-if=\"adAccion==1\">\r\n                            Activar Item\r\n                        </v-card-title>\r\n                        <v-card-title class=\"headline\" v-if=\"adAccion==2\">\r\n                            Desactivar Item\r\n                        </v-card-title>\r\n                        <v-card-text>\r\n                            Estás a punto de <span v-if=\"adAccion==1\">activar </span>\r\n                            <span v-if=\"adAccion==2\">desactivar </span> el item {{adNombre}}\r\n                        </v-card-text>\r\n                        <v-card-actions>\r\n                            <v-spacer></v-spacer>\r\n                            <v-btn @click=\"activarDesactivarCerrar()\" color=\"green darken-1\" flat=\"flat\">\r\n                                Cancelar\r\n                            </v-btn>\r\n                            <v-btn v-if=\"adAccion==1\" @click=\"activar()\" color=\"orange darken-4\" flat=\"flat\">\r\n                                Activar\r\n                            </v-btn>\r\n                            <v-btn v-if=\"adAccion==2\" @click=\"desactivar()\" color=\"orange darken-4\" flat=\"flat\">\r\n                                Desactivar\r\n                            </v-btn>\r\n                        </v-card-actions>\r\n                    </v-card>\r\n                </v-dialog>\r\n            </v-toolbar>\r\n            <v-data-table\r\n                :headers=\"headers\"\r\n                :items=\"ingresos\"\r\n                :search=\"search\"\r\n                class=\"elevation-1\"\r\n                v-if=\"verNuevo==0\"\r\n            >\r\n                <template v-slot:items=\"props\">\r\n                <td class=\"justify-center layout px-0\">\r\n                    <v-icon small class=\"mr-2\" @click=\"verIngreso(props.item)\">\r\n                        tab\r\n                    </v-icon>\r\n                    <template v-if=\"props.item.estado\">\r\n                        <v-icon\r\n                        small\r\n                        @click=\"activarDesactivarMostrar(2,props.item)\"\r\n                        >\r\n                        block\r\n                        </v-icon>\r\n                    </template>\r\n                    <template v-else>\r\n                        <v-icon\r\n                        small\r\n                        @click=\"activarDesactivarMostrar(1,props.item)\"\r\n                        >\r\n                        check\r\n                        </v-icon>\r\n                    </template>\r\n                </td>\r\n                <td>{{ props.item.usuario.nombre }}</td>\r\n                <td>{{ props.item.persona.nombre }}</td>\r\n                <td>{{ props.item.tipo_comprobante }}</td>\r\n                <td>{{ props.item.serie_comprobante }}</td>\r\n                <td>{{ props.item.num_comprobante }}</td>\r\n                <td>{{ props.item.createdAt }}</td>\r\n                <td>{{ props.item.impuesto }}</td>\r\n                <td>{{ props.item.total }}</td>\r\n                <td>\r\n                    <div v-if=\"props.item.estado\">\r\n                        <span class=\"blue--text\">Aceptado</span>\r\n                    </div>\r\n                    <div v-else>\r\n                        <span class=\"red--text\">Anulado</span>\r\n                    </div>\r\n                </td>                \r\n                </template>\r\n                <template v-slot:no-data>\r\n                <v-btn color=\"primary\" @click=\"listar()\">Resetear</v-btn>\r\n                </template>\r\n            </v-data-table>\r\n            <v-container grid-list-sm class=\"pa-4 white\" v-if=\"verNuevo\">\r\n                <v-layout row wrap>\r\n                    <v-flex xs12 sm4 md4 lg4 xl4>\r\n                        <v-select v-model=\"tipo_comprobante\" \r\n                        :items=\"comprobantes\" label=\"Tipo Comprobante\">\r\n                        </v-select>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm4 md4 lg4 xl4>\r\n                        <v-text-field v-model=\"serie_comprobante\" label=\"Serie Comprobante\">\r\n                        </v-text-field>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm4 md4 lg4 xl4>\r\n                        <v-text-field v-model=\"num_comprobante\" label=\"Número Comprobante\">\r\n                        </v-text-field>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm8 md8 lg8 xl8>\r\n                        <v-autocomplete :items=\"personas\" v-model=\"persona\" label=\"Proveedor\">\r\n                        </v-autocomplete>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm4 md4 lg4 xl4>\r\n                        <v-text-field type=\"number\" v-model=\"impuesto\" label=\"Impuesto\">\r\n                        </v-text-field>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm8 md8 lg8 x8>\r\n                        <v-text-field v-model=\"codigo\" label=\"Código\" @keyup.enter=\"buscarCodigo()\">\r\n                        </v-text-field>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm2 md2 lg2 xl2>\r\n                        <v-btn small fab dark color=\"teal\" @click=\"mostrarModalArticulos()\">\r\n                            <v-icon dark>list</v-icon>\r\n                        </v-btn>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm2 md2 lg2 xl2 v-show=\"errorArticulo\">\r\n                        <div class=\"red--text\" v-text=\"errorArticulo\">\r\n\r\n                        </div>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm12 md12 lg12 xl12>\r\n                        <template>\r\n                            <v-data-table\r\n                                :headers=\"cabeceraDetalles\"\r\n                                :items=\"detalles\"\r\n                                hide-actions\r\n                                class=\"elevation-1\"\r\n                            >\r\n                                <template slot=\"items\" slot-scope=\"props\">\r\n                                    <td>\r\n                                        <v-icon\r\n                                        small\r\n                                        class=\"mr-2\"\r\n                                        @click=\"eliminarDetalle(detalles,props.item)\"\r\n                                        >\r\n                                        delete\r\n                                        </v-icon>\r\n                                    </td>\r\n                                    <td class=\"text-xs-center\">{{ props.item.articulo }}</td>\r\n                                    <td class=\"text-xs-center\"><v-text-field v-model=\"props.item.cantidad\" type=\"number\"></v-text-field></td>\r\n                                    <td class=\"text-xs-center\"><v-text-field v-model=\"props.item.precio\" type=\"number\"></v-text-field></td>\r\n                                    <td class=\"text-xs-right\">$ {{ props.item.cantidad * props.item.precio}}</td>\r\n                                </template>\r\n                                <template slot=\"no-data\">\r\n                                    <h3>No hay artículos agregados al detalle.</h3>\r\n                                </template>\r\n                            </v-data-table>\r\n                            <v-flex class=\"text-xs-right\">\r\n                                <strong>Total Parcial:</strong> $ \r\n                                {{totalParcial=(total-totalImpuesto).toFixed(2)}}\r\n                            </v-flex>\r\n                            <v-flex class=\"text-xs-right\">\r\n                                <strong>Total Impuesto:</strong> $ \r\n                                {{totalImpuesto=((total*impuesto)/(1+impuesto)).toFixed(2)}}\r\n                            </v-flex>\r\n                            <v-flex class=\"text-xs-right\">\r\n                                <strong>Total Neto:</strong> $ {{total=calcularTotal}}\r\n                            </v-flex>\r\n                        </template>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm12 md12 v-show=\"valida\">\r\n                        <div class=\"red--text\" v-for=\"v in validaMensaje\" :key=\"v\" v-text=\"v\">\r\n\r\n                        </div>\r\n                    </v-flex>                    \r\n                    <v-flex xs12 sm12 md12 lg12 xl12>\r\n                        <v-btn color=\"blue darken-1\" flat @click.native=\"ocultarNuevo()\">Cancelar</v-btn>\r\n                        <v-btn color=\"success\" v-if=\"verDetalle==0\" @click.native=\"guardar()\">Guardar</v-btn>\r\n                    </v-flex>\r\n\t\t        </v-layout>\r\n            </v-container>\r\n        </v-flex>\r\n    </v-layout>\r\n</template>\r\n<script>\r\n    import axios from 'axios'\r\n    export default {\r\n        data(){\r\n            return{\r\n                dialog: false,\r\n                search:'',\r\n                ingresos:[],\r\n                headers: [\r\n                    { text: 'Opciones', value: 'opciones', sortable: false },\r\n                    { text: 'Usuario', value: 'usuario.nombre', sortable: true },\r\n                    { text: 'Proveedor', value: 'persona.nombre', sortable: true },\r\n                    { text: 'Tipo Comprobante', value: 'tipo_comprobante', sortable: true },\r\n                    { text: 'Serie comprobante', value: 'serie_comprobante', sortable: false  },\r\n                    { text: 'Número comprobante', value: 'num_comprobante', sortable: false  },\r\n                    { text: 'Fecha', value: 'createdAt', sortable: false  },\r\n                    { text: 'Impuesto', value: 'impuesto', sortable: false  },\r\n                    { text: 'Total', value: 'total', sortable: false  },\r\n                    { text: 'Estado', value: 'estado', sortable: false  }                \r\n                ],\r\n                _id:'',\r\n                persona:'',\r\n                personas:[],\r\n                tipo_comprobante:'',\r\n                comprobantes: ['BOLETA','FACTURA','TICKET','GUIA'],\r\n                serie_comprobante:'',\r\n                num_comprobante: '',\r\n                impuesto: 0.18,\r\n                codigo:'',\r\n                cabeceraDetalles:[\r\n                    { text: 'Borrar', value: 'borrar', sortable: false },\r\n                    { text: 'Artículo', value: 'articulo', sortable: false },\r\n                    { text: 'Cantidad', value: 'cantidad', sortable: false },\r\n                    { text: 'Precio', value: 'precio', sortable: false },\r\n                    { text: 'Sub Total', value: 'subtotal', sortable: false  }\r\n                ],\r\n                detalles:[],\r\n                verNuevo:0,\r\n                errorArticulo:null,\r\n                total:0,\r\n                totalParcial:0,\r\n                totalImpuesto:0,\r\n                articulos:[],\r\n                texto:'',\r\n                cabeceraArticulos: [\r\n                    { text: 'Seleccionar', value: 'seleccionar', sortable: false },\r\n                    { text: 'Código',value: 'codigo', sortable: false},\r\n                    { text: 'Nombre',value: 'nombre', sortable: true},\r\n                    { text: 'Categoría',value: 'categoria.nombre', sortable: true},\r\n                    { text: 'Stock',value: 'stock', sortable: false},\r\n                    { text: 'Precio Venta',value: 'precio_venta', sortable: false},\r\n                    { text: 'Descripción', value: 'descripcion', sortable: false },              \r\n                    { text: 'Estado', value: 'estado', sortable: false }\r\n                ],\r\n                verDetalle:0,\r\n                valida:0,\r\n                validaMensaje:[],\r\n                adModal:0,\r\n                adAccion:0,\r\n                adNombre:'',\r\n                adId:''\r\n            }\r\n        },\r\n        computed: {\r\n            calcularTotal: function(){\r\n                let resultado=0.0;\r\n                for(var i=0;i<this.detalles.length;i++){\r\n                    resultado=resultado+(this.detalles[i].cantidad*this.detalles[i].precio);\r\n                }\r\n                return resultado;\r\n            }\r\n        },\r\n        watch: {\r\n            dialog (val) {\r\n            val || this.close()\r\n            }\r\n        },\r\n        created () {\r\n            this.listar();\r\n            this.selectPersona();\r\n        },\r\n        methods: {\r\n            selectPersona(){\r\n                let me=this;\r\n                let personaArray=[];\r\n                let header={\"Token\" : this.$store.state.token};\r\n                let configuracion= {headers : header};            \r\n                axios.get('persona/listProveedores',configuracion).then(function (response){\r\n                    personaArray=response.data;\r\n                    personaArray.map(function(x){\r\n                        me.personas.push({text:x.nombre, value:x._id});\r\n                    });\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            buscarCodigo(){\r\n                let me=this;\r\n                me.errorArticulo=null;\r\n                let header={\"Token\" : this.$store.state.token};\r\n                let configuracion= {headers : header};            \r\n                axios.get('articulo/queryCodigo?codigo='+this.codigo,configuracion).then(function (response){\r\n                    me.agregarDetalle(response.data);\r\n                }).catch(function(error){\r\n                    me.errorArticulo='No existe el artículo.';\r\n                });\r\n\r\n            },\r\n            agregarDetalle(data){\r\n                this.errorArticulo=null;\r\n                if (this.encuentra(data._id)==true){\r\n                    this.errorArticulo='El artículo ya ha sido agregado.';\r\n                }\r\n                else{\r\n                    this.detalles.push(\r\n                        {\r\n                            _id:data._id,\r\n                            articulo:data.nombre,\r\n                            cantidad:1,\r\n                            precio:data.precio_venta\r\n                        }\r\n                    );\r\n                    this.codigo='';\r\n                }\r\n                \r\n            },\r\n            encuentra(id){\r\n                let sw=0;\r\n                for (var i=0;i<this.detalles.length;i++){\r\n                    if(this.detalles[i]._id==id){\r\n                        sw=true;\r\n                    }\r\n                }\r\n                return sw;\r\n            },\r\n            eliminarDetalle(arr,item){\r\n                let i=arr.indexOf(item);\r\n                if (i!= -1){\r\n                    arr.splice(i,1);\r\n                }\r\n            },\r\n            listarArticulos(){\r\n                let me=this;\r\n                let header={\"Token\" : this.$store.state.token};\r\n                let configuracion= {headers : header};            \r\n                axios.get('articulo/list?valor='+this.texto,configuracion).then(function (response){\r\n                    me.articulos=response.data;\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            mostrarModalArticulos(){\r\n                this.dialog=1;\r\n            },\r\n            listarDetalles(id){\r\n                let me=this;\r\n                let header={\"Token\" : this.$store.state.token};\r\n                let configuracion= {headers : header};            \r\n                axios.get('ingreso/query?_id='+id,configuracion).then(function (response){\r\n                    me.detalles=response.data.detalles;\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            verIngreso(item){\r\n                this.limpiar();\r\n                this.tipo_comprobante=item.tipo_comprobante;\r\n                this.serie_comprobante=item.serie_comprobante;\r\n                this.num_comprobante=item.num_comprobante;\r\n                this.persona=item.persona._id;\r\n                this.impuesto=item.impuesto;\r\n                this.listarDetalles(item._id);\r\n                this.verNuevo=1;\r\n                this.verDetalle=1;\r\n            },\r\n            listar(){\r\n                let me=this;\r\n                let header={\"Token\" : this.$store.state.token};\r\n                let configuracion= {headers : header};            \r\n                axios.get('ingreso/list',configuracion).then(function (response){\r\n                    me.ingresos=response.data;\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n\r\n            },\r\n            limpiar(){\r\n                this._id='';\r\n                this.tipo_comprobante='';\r\n                this.serie_comprobante='';\r\n                this.num_comprobante='';\r\n                this.impuesto=0.18;\r\n                this.codigo='';\r\n                this.total=0;\r\n                this.totalParcial=0;\r\n                this.totalImpuesto=0;\r\n                this.detalles=[];\r\n                this.verNuevo=0;\r\n                this.valida=0;\r\n                this.validaMensaje=[];\r\n                this.verDetalle=0;\r\n            },\r\n            validar(){\r\n                this.valida=0;\r\n                this.validaMensaje=[];\r\n                if(!this.persona){\r\n                    this.validaMensaje.push('Seleccione un proveedor.');\r\n                }\r\n                if(!this.tipo_comprobante){\r\n                    this.validaMensaje.push('Seleccione un tipo de comprobante.');\r\n                }\r\n                if(!this.num_comprobante){\r\n                    this.validaMensaje.push('Ingrese el número del comprobante.');\r\n                }\r\n                if(!this.impuesto || this.impuesto<0 || this.impuesto>1){\r\n                    this.validaMensaje.push('Ingrese un impuesto válido.');\r\n                }\r\n                if(this.detalles.length<=0){\r\n                    this.validaMensaje.push('Ingrese al menos un artículo al detalle');\r\n                }\r\n                if (this.validaMensaje.length){\r\n                    this.valida=1;\r\n                }\r\n                return this.valida;\r\n            },\r\n            mostrarNuevo(){\r\n                this.verNuevo=1;\r\n            },\r\n            ocultarNuevo(){\r\n                this.verNuevo=0;\r\n                this.limpiar();\r\n            },\r\n            guardar(){\r\n                let me=this;\r\n                let header={\"Token\" : this.$store.state.token};\r\n                let configuracion= {headers : header};\r\n                if (this.validar()){\r\n                    return;\r\n                }\r\n                //Código para guardar\r\n                axios.post('ingreso/add',\r\n                {\r\n                    'persona':this.persona,\r\n                    'usuario':this.$store.state.usuario._id,\r\n                    'tipo_comprobante': this.tipo_comprobante,\r\n                    'serie_comprobante': this.serie_comprobante,\r\n                    'num_comprobante':this.num_comprobante,\r\n                    'impuesto': this.impuesto,\r\n                    'total':this.total,\r\n                    'detalles':this.detalles\r\n                },configuracion)\r\n                .then(function(response){\r\n                    me.limpiar();\r\n                    me.close();\r\n                    me.listar();\r\n                })\r\n                .catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            activarDesactivarMostrar(accion,item){\r\n                this.adModal=1;\r\n                this.adNombre=item.num_comprobante;\r\n                this.adId=item._id;\r\n                if (accion==1){\r\n                    this.adAccion=1;\r\n                } else if(accion==2){\r\n                    this.adAccion=2;\r\n                } else{\r\n                    this.adModal=0;\r\n                }\r\n            },\r\n            activarDesactivarCerrar(){\r\n                this.adModal=0;\r\n            },\r\n            activar(){\r\n                let me=this;\r\n                let header={\"Token\" : this.$store.state.token};\r\n                let configuracion= {headers : header};\r\n                axios.put('ingreso/activate',{'_id':this.adId},configuracion)\r\n                    .then(function(response){\r\n                        me.adModal=0;\r\n                        me.adAccion=0;\r\n                        me.adNombre='';\r\n                        me.adId='';\r\n                        me.listar();\r\n                    })\r\n                    .catch(function(error){\r\n                        console.log(error);\r\n                    });\r\n            },\r\n            desactivar(){\r\n                let me=this;\r\n                let header={\"Token\" : this.$store.state.token};\r\n                let configuracion= {headers : header};\r\n                axios.put('ingreso/deactivate',{'_id':this.adId},configuracion)\r\n                    .then(function(response){\r\n                        me.adModal=0;\r\n                        me.adAccion=0;\r\n                        me.adNombre='';\r\n                        me.adId='';\r\n                        me.listar();\r\n                    })\r\n                    .catch(function(error){\r\n                        console.log(error);\r\n                    });\r\n            },\r\n            close () {\r\n                this.dialog = false;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n"],"sourceRoot":"src/components"}]}