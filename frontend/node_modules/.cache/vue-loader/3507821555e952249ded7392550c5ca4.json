{"remainingRequest":"C:\\laragon\\www\\prueba-bit-coco\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\prueba-bit-coco\\frontend\\src\\components\\ListaProducto.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\laragon\\www\\prueba-bit-coco\\frontend\\src\\components\\ListaProducto.vue","mtime":1644003926768},{"path":"C:\\laragon\\www\\prueba-bit-coco\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642907172876},{"path":"C:\\laragon\\www\\prueba-bit-coco\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1642907173684},{"path":"C:\\laragon\\www\\prueba-bit-coco\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1642907173882},{"path":"C:\\laragon\\www\\prueba-bit-coco\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642907172876},{"path":"C:\\laragon\\www\\prueba-bit-coco\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1642907175054}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nexport default {\n    data(){\n        return{\n            dialog: false,\n            search:'',\n            productos:[],\n            headers: [\n                { text: 'Código',value: 'codigo', sortable: false},\n                { text: 'Nombre',value: 'nombre', sortable: true},\n                { text: 'Cantidad',value: 'cantidad', sortable: true},\n                { text: 'Opciones', value: 'opciones', sortable: false },\n            ],\n            editedIndex: -1,\n            id:'',\n            producto:'',\n            listaProductos:[],\n            cantidad: '',\n            valida:0,\n            validaMensaje:[],\n            adModal:0,\n            adAccion:0,\n            adNombre:'',\n            adId:'',\n            productoServer:[]\n        }\n    },\n    computed: {\n        formTitle () {\n            return this.editedIndex === -1 ? 'Nuevo registro' : 'Editar registro'\n        }\n    },\n    watch: {\n        dialog (val) {\n            val || this.close()\n        }\n    },\n    created () {\n        this.listar();\n        this.selectProducto();\n    },\n    methods: {\n        selectProducto(){\n            let me = this;          \n            axios.get('producto/index').then(function (response){\n                me.productos = response.data;\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n        listar(){\n            let me = this;           \n            axios.get(`lista-producto/index/${this.$store.state.usuario.id}`).then(function (response){\n                me.listaProductos = response.data;\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n        limpiar(){\n            this.id = '';\n            this.producto = '';\n            this.cantidad = '';\n            this.editedIndex = -1;\n        },\n        guardar(){\n            let me = this;\n            if (this.editedIndex >-1){\n                axios.put(`lista-producto/update/${me.id}`,\n                {\n                    'producto':this.producto,\n                    'cantidad':this.cantidad,\n                    'user':this.$store.state.usuario.id,\n                })\n                .then(function(response){\n                    Swal.fire(\n                        'Modificado!',\n                        'Su registro ha sido modificado.',\n                        'success'\n                    )\n                    me.limpiar();\n                    me.close();\n                    me.listar();\n                })\n                .catch(function(error){\n                    console.log(error);\n                });\n            }else{\n                axios.post('lista-producto/store',\n                {\n                    'producto':this.producto,\n                    'cantidad':this.cantidad,\n                    'user':this.$store.state.usuario.id,\n                })\n                .then(function(response){\n                    Swal.fire(\n                        'Registrado!',\n                        'Su registro ha sido creado.',\n                        'success'\n                    )\n                    me.limpiar();\n                    me.close();\n                    me.listar();\n                })\n                .catch(function(error){\n                    me.productoServer.push({\n                        'producto':me.producto,\n                        'cantidad':me.cantidad,\n                        'user':me.$store.state.usuario.id,\n                    });\n                    localStorage.setItem(\"producto\", JSON.stringify(me.productoServer));\n                });\n            }\n        },\n        editItem (item) {\n            this.id = item.idList;\n            this.producto = item.idPro;\n            this.cantidad = item.cantidad;\n            this.dialog = true;\n            this.editedIndex = 1;\n        },\n        deleteItem(id){\n            let me = this;\n            Swal.fire({\n                title: 'Estas seguro?',\n                text: \"No podrás revertir esto!\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#3085d6',\n                cancelButtonColor: '#d33',\n                confirmButtonText: '¡Sí, bórralo!',\n                cancelButtonText: 'Cancelar'\n                }).then((result) => {\n                if (result.isConfirmed) {\n                    axios.get(`lista-producto/delete/${id}`).then(function (response){\n                        Swal.fire(\n                            'Eliminado!',\n                            'Su registro ha sido eliminado.',\n                            'success'\n                        );\n                        me.listar();\n                    }).catch(function(error){\n                        console.log(error);\n                    });\n                }\n            })\n        },\n        close () {\n            this.dialog = false;\n        }\n    }\n}\n",{"version":3,"sources":["ListaProducto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListaProducto.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <v-layout align-start>\r\n        <v-flex>\r\n            <v-toolbar flat color=\"white\">\r\n                <v-toolbar-title>Lista De Productos</v-toolbar-title>\r\n                <v-divider\r\n                    class=\"mx-2\"\r\n                    inset\r\n                    vertical\r\n                ></v-divider>\r\n                <v-spacer></v-spacer>\r\n                <v-text-field class=\"text-xs-center\" v-model=\"search\" append-icon=\"search\" \r\n                label=\"Búsqueda\" single-line hide-details></v-text-field>\r\n                <v-spacer></v-spacer>\r\n                <v-dialog v-model=\"dialog\" max-width=\"500px\">\r\n                    <template v-slot:activator=\"{ on }\">\r\n                        <v-btn color=\"primary\" dark class=\"mb-2\" v-on=\"on\">Nuevo</v-btn>\r\n                    </template>\r\n                    <v-card>\r\n                        <v-card-title>\r\n                        <span class=\"headline\">{{ formTitle }}</span>\r\n                        </v-card-title>            \r\n                        <v-card-text>\r\n                        <v-container grid-list-md>\r\n                            <v-layout wrap>\r\n                                <v-flex xs6 sm6 md6>\r\n                                    <v-select v-model=\"producto\" outline\r\n                                        :items=\"productos\"\r\n                                        item-text=\"nombre\"\r\n                                        item-value=\"id\"\r\n                                        label=\"Producto\">\r\n                                    </v-select>\r\n                                </v-flex>\r\n                                <v-flex xs6 sm6 mdd6>\r\n                                    <v-text-field v-model=\"cantidad\" label=\"Cantidad\" outline>                                        \r\n                                    </v-text-field>\r\n                                </v-flex>\r\n                            </v-layout>\r\n                        </v-container>\r\n                        </v-card-text>            \r\n                        <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn color=\"blue darken-1\" flat @click=\"close\">Cancelar</v-btn>\r\n                        <v-btn color=\"blue darken-1\" flat @click=\"guardar\">Guardar</v-btn>\r\n                        </v-card-actions>\r\n                    </v-card>\r\n                </v-dialog>\r\n            </v-toolbar>\r\n            <v-data-table\r\n                :headers=\"headers\"\r\n                :items=\"listaProductos\"\r\n                :search=\"search\"\r\n                class=\"elevation-1\"\r\n            >\r\n                <template v-slot:items=\"props\">\r\n                    <td>{{ props.item.codigo }}</td>\r\n                    <td>{{ props.item.nombre }}</td>\r\n                    <td>{{ props.item.cantidad }}</td>    \r\n                    <td class=\"ml-4 layout px-0\">\r\n                        <v-icon\r\n                            small\r\n                            class=\"mr-2\"\r\n                            @click=\"editItem(props.item)\"\r\n                        >\r\n                            edit\r\n                        </v-icon>\r\n                        <v-icon\r\n                            small\r\n                            class=\"mr-2\"\r\n                            @click=\"deleteItem(props.item.idList)\"\r\n                        >\r\n                            delete\r\n                        </v-icon>\r\n                    </td>       \r\n                </template>\r\n            </v-data-table>\r\n        </v-flex>\r\n    </v-layout>\r\n</template>\r\n<script>\r\n    import axios from 'axios';\r\n    import Swal from 'sweetalert2';\r\n    export default {\r\n        data(){\r\n            return{\r\n                dialog: false,\r\n                search:'',\r\n                productos:[],\r\n                headers: [\r\n                    { text: 'Código',value: 'codigo', sortable: false},\r\n                    { text: 'Nombre',value: 'nombre', sortable: true},\r\n                    { text: 'Cantidad',value: 'cantidad', sortable: true},\r\n                    { text: 'Opciones', value: 'opciones', sortable: false },\r\n                ],\r\n                editedIndex: -1,\r\n                id:'',\r\n                producto:'',\r\n                listaProductos:[],\r\n                cantidad: '',\r\n                valida:0,\r\n                validaMensaje:[],\r\n                adModal:0,\r\n                adAccion:0,\r\n                adNombre:'',\r\n                adId:'',\r\n                productoServer:[]\r\n            }\r\n        },\r\n        computed: {\r\n            formTitle () {\r\n                return this.editedIndex === -1 ? 'Nuevo registro' : 'Editar registro'\r\n            }\r\n        },\r\n        watch: {\r\n            dialog (val) {\r\n                val || this.close()\r\n            }\r\n        },\r\n        created () {\r\n            this.listar();\r\n            this.selectProducto();\r\n        },\r\n        methods: {\r\n            selectProducto(){\r\n                let me = this;          \r\n                axios.get('producto/index').then(function (response){\r\n                    me.productos = response.data;\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            listar(){\r\n                let me = this;           \r\n                axios.get(`lista-producto/index/${this.$store.state.usuario.id}`).then(function (response){\r\n                    me.listaProductos = response.data;\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            limpiar(){\r\n                this.id = '';\r\n                this.producto = '';\r\n                this.cantidad = '';\r\n                this.editedIndex = -1;\r\n            },\r\n            guardar(){\r\n                let me = this;\r\n                if (this.editedIndex >-1){\r\n                    axios.put(`lista-producto/update/${me.id}`,\r\n                    {\r\n                        'producto':this.producto,\r\n                        'cantidad':this.cantidad,\r\n                        'user':this.$store.state.usuario.id,\r\n                    })\r\n                    .then(function(response){\r\n                        Swal.fire(\r\n                            'Modificado!',\r\n                            'Su registro ha sido modificado.',\r\n                            'success'\r\n                        )\r\n                        me.limpiar();\r\n                        me.close();\r\n                        me.listar();\r\n                    })\r\n                    .catch(function(error){\r\n                        console.log(error);\r\n                    });\r\n                }else{\r\n                    axios.post('lista-producto/store',\r\n                    {\r\n                        'producto':this.producto,\r\n                        'cantidad':this.cantidad,\r\n                        'user':this.$store.state.usuario.id,\r\n                    })\r\n                    .then(function(response){\r\n                        Swal.fire(\r\n                            'Registrado!',\r\n                            'Su registro ha sido creado.',\r\n                            'success'\r\n                        )\r\n                        me.limpiar();\r\n                        me.close();\r\n                        me.listar();\r\n                    })\r\n                    .catch(function(error){\r\n                        me.productoServer.push({\r\n                            'producto':me.producto,\r\n                            'cantidad':me.cantidad,\r\n                            'user':me.$store.state.usuario.id,\r\n                        });\r\n                        localStorage.setItem(\"producto\", JSON.stringify(me.productoServer));\r\n                    });\r\n                }\r\n            },\r\n            editItem (item) {\r\n                this.id = item.idList;\r\n                this.producto = item.idPro;\r\n                this.cantidad = item.cantidad;\r\n                this.dialog = true;\r\n                this.editedIndex = 1;\r\n            },\r\n            deleteItem(id){\r\n                let me = this;\r\n                Swal.fire({\r\n                    title: 'Estas seguro?',\r\n                    text: \"No podrás revertir esto!\",\r\n                    icon: 'warning',\r\n                    showCancelButton: true,\r\n                    confirmButtonColor: '#3085d6',\r\n                    cancelButtonColor: '#d33',\r\n                    confirmButtonText: '¡Sí, bórralo!',\r\n                    cancelButtonText: 'Cancelar'\r\n                    }).then((result) => {\r\n                    if (result.isConfirmed) {\r\n                        axios.get(`lista-producto/delete/${id}`).then(function (response){\r\n                            Swal.fire(\r\n                                'Eliminado!',\r\n                                'Su registro ha sido eliminado.',\r\n                                'success'\r\n                            );\r\n                            me.listar();\r\n                        }).catch(function(error){\r\n                            console.log(error);\r\n                        });\r\n                    }\r\n                })\r\n            },\r\n            close () {\r\n                this.dialog = false;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n"]}]}