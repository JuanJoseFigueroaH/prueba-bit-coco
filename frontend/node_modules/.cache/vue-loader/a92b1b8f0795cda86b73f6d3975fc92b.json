{"remainingRequest":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\project-corhuila\\frontend\\src\\components\\AgendaSemetral.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\src\\components\\AgendaSemetral.vue","mtime":1643135302143},{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642907172876},{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1642907173684},{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1642907173882},{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642907172876},{"path":"C:\\laragon\\www\\project-corhuila\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1642907175054}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport moment from 'moment';\nexport default {\n    data(){\n        return {\n            tab: 0,\n            registro: false,\n            actividad: [],\n            actividadPrimaria: [],\n            actividadSecundaria: [],\n            actividadTerciaria: [],\n            productoActividadTerciaria: [],\n            actividadAdd: [],\n            periodoAcademicos: [],\n            facultades: [],\n            programas: [],\n            docencia: [],\n            asignaturas: [],\n            sedes: [],\n            cantidadSemanal: 0,\n            cantidadSemestral: 0,\n            periodoAcamdemico: \"\",\n            nombreCompletoDocente: this.$store.state.usuario.nombre,\n            fechaActualAgenda: moment().format('YYYY-MM-DD'),\n            facultad: this.$store.state.usuario.facultad_id,\n            programa: this.$store.state.usuario.programa_id,\n            rules: {\n                cantidadSemanaRule: [\n                    v => (v < 40) || 'La cantidad de horas semanales no debe ser mayor a 40',\n                ],\n                cantidadSemestralRule: [\n                    v => (v < 720) || 'La cantidad de horas semestrales no debe ser mayor a 720',\n                ],\n                validacionNumerica: [\n                    v => /^[0-9]+$/.test(v) || 'Valores númericos'\n                ]\n            },\n            informacionDocencia: {\n                asignatura: \"\",\n                programa: \"\",\n                grupo: \"\",\n                sede: \"\",\n                dedicacionPresencialSemanal: \"\",\n                dedicacionSemestral: \"\"\n            },\n            docenciaInformacion: {\n                asignatura: \"\",\n                programa: \"\",\n                grupo: \"\",\n                sede: \"\",\n                dedicacionPresencialSemanal: \"\",\n                dedicacionSemestral: \"\"\n            },\n            agendaSemestral: {},\n        }\n    },\n    created () {\n        this.agendaSemestralRegistro();\n        this.pushDocencia();\n        this.indexAsignatura();\n        this.indexSede();\n        this.periodoAcademicoIndex();\n        this.facultadIndex();\n        this.programaIndex();\n        this.indexActividadPrimaria();\n        this.indexActividadSecundaria();\n        this.indexActividadTerciario();\n        this.indexProductoActividadTerciaria();\n    },\n    methods: {\n        agendaSemestralRegistro(){\n            let me = this;         \n            axios.get(`agenda-semestral/searchUserIdAndPeriodo/${this.$store.state.usuario.id}/1`).then(function (response){\n                if(response.data.length > 0){\n                    me.registro = true;\n                    Swal.fire({\n                        title: '¡Buen Trabajo!',\n                        text: 'La agenda semestral ya ha sido registrada.',\n                        imageUrl: require('./../assets/Logo.jpg'),\n                    });\n                }\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n        registrarAgenda(){\n            if(this.cantidadSemanal == 40){\n                let me = this;         \n                \n                me.agendaSemestral.idDocente = this.$store.state.usuario.id;\n                me.agendaSemestral.actividadTerciaria = me.actividadAdd;\n                me.agendaSemestral.docencia = me.docencia;\n                me.agendaSemestral.facultad = me.facultad;\n                me.agendaSemestral.programa = me.programa;\n                me.agendaSemestral.fecha = me.fechaActualAgenda;\n                me.agendaSemestral.periodoAcademico = me.periodoAcamdemico;\n\n                axios.post('agenda-semestral/registrar-agenda', me.agendaSemestral).then(function (response){\n                    Swal.fire(\n                        '¡Buen Trabajo!',\n                        response.data.message,\n                        'success'\n                    );\n                }).catch(function(error){\n                    console.log(error);\n                });\n            }else{\n                Swal.fire(\n                    '¡Revisar!',\n                    'La cantidad de horas semanales debe ser igual a 40',\n                    'error'\n                )\n            }\n        },\n        dedicacionSemanalDocencia(cantidad, asignatura, grupo){\n            this.docencia.map(function (docencia){\n                if(docencia.asignatura == asignatura && docencia.grupo == grupo){\n                    docencia.dedicacionSemestral = cantidad * 18;\n                }\n            })\n        },\n        pushDocencia(){\n            this.docencia.push(this.informacionDocencia);\n        },\n        pushDocenciaInformacion(){\n            this.docencia.push(this.docenciaInformacion);\n        },\n        periodoAcademicoIndex(){\n            let me = this;         \n            axios.get('periodo-academico/index').then(function (response){\n                me.periodoAcademicos = response.data;\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n        facultadIndex(){\n            let me = this;         \n            axios.get('facultad/index').then(function (response){\n                me.facultades = response.data;\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n        programaIndex(){\n            let me = this;         \n            axios.get('programa/index').then(function (response){\n                me.programas = response.data;\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n        indexAsignatura(){\n            let me = this;         \n            axios.get('asignatura/index').then(function (response){\n                me.asignaturas = response.data;\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n        indexSede(){\n            let me = this;         \n            axios.get('sede/index').then(function (response){\n                me.sedes = response.data;\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n        addProductoActTer(producto, id){\n            let me = this;\n            me.actividadAdd.map(function(actividadAdd){\n                if(actividadAdd.idActTer == id){\n                    actividadAdd.productoSelect = producto;\n                }\n            });\n        },\n        addDescripcionActTer(descripcion, id){\n            let me = this;\n            me.actividadAdd.map(function(actividadAdd){\n                if(actividadAdd.idActTer == id){\n                    actividadAdd.descripcionActTer = descripcion;\n                }\n            });\n        },\n        addCantidadActTer(actTer){\n            let me = this;\n            if(actTer.cantidadActTer > 0){\n                me.actividad.map(function(actividad){\n                    actividad.actividadSecundaria.map(function(actividadSecundaria){\n                        actividadSecundaria.actividadTerciaria.map(function(actividadTerciaria){\n                            if(actividadTerciaria.idActTer == actTer.idActTer){\n                                actividadTerciaria.dedicacionActTer = actTer.cantidadActTer * 18;\n                            }\n                        });\n                    });\n                });\n\n                me.actividadAdd.push(actTer);\n            }else{\n                let position = me.actividadAdd.indexOf(actTer);\n                me.actividadAdd.splice(position, 1);\n            }\n\n            me.cantidadSemanal = 0;\n            me.cantidadSemestral = 0;\n            me.actividadAdd.map(function(actividadAdd){\n                me.cantidadSemanal = parseInt(me.cantidadSemanal) + parseInt(actividadAdd.cantidadActTer);\n                me.cantidadSemestral = parseInt(me.cantidadSemestral) + parseInt(actividadAdd.dedicacionActTer);\n            })\n        },\n        indexActividadPrimaria(){\n            let me = this;         \n            axios.get('actividad-primaria/index').then(function (response){\n                me.actividadPrimaria = response.data;\n                me.actividadPrimaria.map(function(actividadPrimaria){\n                    me.actividad.push(\n                        {\n                            idActPri: actividadPrimaria.id, \n                            nombreActPri: actividadPrimaria.nombre\n                        }\n                    );\n                });\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n        indexActividadSecundaria(){\n            let me = this;         \n            axios.get('actividad-secundaria/index').then(function (response){\n                me.actividadSecundaria = response.data;\n                me.actividad.map(function(actividad, index){\n                    actividad.actividadSecundaria = [];\n                    me.actividadSecundaria.map(function(actividadSecundaria){\n                        if(actividad.idActPri == actividadSecundaria.actividad_primaria_id){\n                            actividad.actividadSecundaria.push(\n                                {\n                                    idActSec: actividadSecundaria.id, \n                                    nombreActSec: actividadSecundaria.nombre\n                                }\n                            );\n                        }\n                    });\n                });\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n        indexActividadTerciario(){\n            let me = this;         \n            axios.get('actividad-terciaria/index').then(function (response){\n                me.actividadTerciaria = response.data;\n                me.actividad.map(function(actividad, index){\n                    if(actividad.actividadSecundaria.length > 0){\n                        actividad.actividadSecundaria.map(function(actividadSecundaria){\n                            actividadSecundaria.actividadTerciaria = [];\n                        });\n                    }else{\n                        actividad.actividadSecundaria.push([]);\n                        actividad.actividadSecundaria[0].actividadTerciaria = [];\n                    }\n\n                    actividad.actividadSecundaria.map(function(actividadSecundaria){\n                        me.actividadTerciaria.map(function(actividadTerciaria){\n                            if(actividad.idActPri == actividadTerciaria.actividad_primaria_id && \n                                actividadSecundaria.idActSec == actividadTerciaria.actividad_secundaria_id){\n                                actividadSecundaria.actividadTerciaria.push(\n                                    {\n                                        idActTer: actividadTerciaria.id, \n                                        nombreActTer: actividadTerciaria.nombre,\n                                        cantidadActTer: 0,\n                                        productoSelect: '',\n                                        descripcionActTer: ''\n                                    }\n                                );  \n                            }else if(actividad.idActPri == actividadTerciaria.actividad_primaria_id && \n                                actividadSecundaria.idActSec == null){\n                                actividadSecundaria.actividadTerciaria.push(\n                                    {\n                                        idActTer: actividadTerciaria.id, \n                                        nombreActTer: actividadTerciaria.nombre,\n                                        cantidadActTer: 0,\n                                        productoSelect: '',\n                                        descripcionActTer: ''\n                                    }\n                                );  \n                            }\n                        })\n\n                    });\n                });\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n        indexProductoActividadTerciaria(){\n            let me = this;         \n            axios.get('producto-actividad-terciaria/index').then(function (response){\n                me.productoActividadTerciaria = response.data;\n                me.actividad.map(function(actividad){\n                    actividad.actividadSecundaria.map(function(actividadSecundaria){\n                        actividadSecundaria.actividadTerciaria.map(function(actividadTerciaria){\n                            actividadTerciaria.producto = [];\n                            actividadTerciaria.dedicacionActTer = 0;\n                            me.productoActividadTerciaria.map(function(productoActividadTerciaria){\n                                if(productoActividadTerciaria.actividad_terciaria_id == actividadTerciaria.idActTer){\n                                    actividadTerciaria.producto.push(\n                                        {\n                                            idPro: productoActividadTerciaria.id, \n                                            codigoPro: productoActividadTerciaria.codigo,\n                                            nombrePro: productoActividadTerciaria.nombre,\n                                        }\n                                    );  \n                                }\n                            });\n                        });\n                    });\n                });\n            }).catch(function(error){\n                console.log(error);\n            });\n        },\n    }\n}\n",{"version":3,"sources":["AgendaSemetral.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AgendaSemetral.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <v-layout align-start>\r\n        <v-flex v-if=\"registro == false\">\r\n            <template flat color=\"white\">\r\n                <v-container grid-list-md>\r\n                    <v-layout wrap>\r\n                        <v-flex xs12 sm6 md5>\r\n                            <v-text-field v-model=\"nombreCompletoDocente\" label=\"Nombre del docente\" outline readonly>                                        \r\n                            </v-text-field>\r\n                        </v-flex>\r\n                        <v-flex xs12 sm6 md3>\r\n                            <v-select\r\n                                v-model=\"facultad\"\r\n                                :items=\"facultades\"\r\n                                item-text=\"nombre\"\r\n                                item-value=\"id\"\r\n                                label=\"Facultad\"\r\n                                dense\r\n                                outline>\r\n                            </v-select>\r\n                        </v-flex>\r\n                        <v-flex xs12 sm6 md4>\r\n                           <v-select\r\n                                v-model=\"programa\"\r\n                                :items=\"programas\"\r\n                                item-text=\"nombre\"\r\n                                item-value=\"id\"\r\n                                label=\"Programa\"\r\n                                dense\r\n                                outline>\r\n                            </v-select>\r\n                        </v-flex>\r\n                    </v-layout>\r\n                </v-container>\r\n                <v-container grid-list-md>\r\n                    <v-layout wrap>\r\n                        <v-flex xs12 sm6 md2>\r\n                            <v-text-field v-model=\"fechaActualAgenda\" label=\"Fecha\" outline readonly>                                        \r\n                            </v-text-field>\r\n                        </v-flex>\r\n                        <v-flex xs12 sm6 md2>\r\n                            <v-select\r\n                                v-model=\"periodoAcamdemico\"\r\n                                :items=\"periodoAcademicos\"\r\n                                item-text=\"nombre\"\r\n                                item-value=\"id\"\r\n                                label=\"Periodo\"\r\n                                dense\r\n                                outline>\r\n                            </v-select>\r\n                        </v-flex>\r\n                    </v-layout>\r\n                </v-container>\r\n            </template>\r\n            <template flat color=\"white\">\r\n                <v-layout wrap>\r\n                    <v-flex xs12 sm6 md2>\r\n                        <h3 class=\"font-weight-bold\"> Docencia - Orientación de clases </h3>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm6 md1>\r\n                        <v-icon color=\"green darken-2\" @click=\"pushDocenciaInformacion()\">add</v-icon>\r\n                    </v-flex>\r\n                </v-layout>\r\n                <v-container grid-list-md  v-for=\"(docen) in docencia\" :key=\"docen.asignatura\">\r\n                    <v-layout wrap>\r\n                        <v-flex xs12 sm6 md4>\r\n                            <v-select\r\n                                v-model=\"docen.asignatura\"\r\n                                :items=\"asignaturas\"\r\n                                item-text=\"nombre\"\r\n                                item-value=\"id\"\r\n                                label=\"Asignatura\"\r\n                                dense\r\n                                outline>\r\n                            </v-select>\r\n                        </v-flex>\r\n                        <v-flex xs12 sm6 md3>\r\n                            <v-select\r\n                                v-model=\"docen.programa\"\r\n                                :items=\"programas\"\r\n                                item-text=\"nombre\"\r\n                                item-value=\"id\"\r\n                                label=\"Programa\"\r\n                                dense\r\n                                outline>\r\n                            </v-select>\r\n                        </v-flex>\r\n                        <v-flex xs12 sm6 md1>\r\n                            <v-text-field v-model=\"docen.grupo\" label=\"Grupo\" outline>                                        \r\n                            </v-text-field>\r\n                        </v-flex>\r\n                        <v-flex xs12 sm6 md2>\r\n                            <v-select\r\n                                v-model=\"docen.sede\"\r\n                                :items=\"sedes\"\r\n                                item-text=\"nombre\"\r\n                                item-value=\"id\"\r\n                                label=\"Sede\"\r\n                                dense\r\n                                outline>\r\n                            </v-select>\r\n                        </v-flex>\r\n                        <v-flex xs12 sm6 md1>\r\n                            <v-text-field v-model=\"docen.dedicacionPresencialSemanal\" @change=\"dedicacionSemanalDocencia(docen.dedicacionPresencialSemanal, docen.asignatura, docen.grupo)\" label=\"Dedicación Semanal\" outline>                                        \r\n                            </v-text-field>\r\n                        </v-flex>\r\n                        <v-flex xs12 sm6 md1>\r\n                            <v-text-field v-model=\"docen.dedicacionSemestral\" label=\"Dedicación semestral\" outline readonly=\"\">                                        \r\n                            </v-text-field>\r\n                        </v-flex>\r\n                    </v-layout>\r\n                </v-container>\r\n            </template>\r\n            <v-toolbar flat color=\"white\">\r\n                <v-toolbar-title>Agenda Semestral</v-toolbar-title>\r\n                <v-spacer></v-spacer>\r\n                <template v-slot:extension>\r\n                    <v-tabs\r\n                        centered\r\n                        slider-color=\"green\"\r\n                        v-model=\"tab\"\r\n                    >\r\n                        <v-tab\r\n                            v-for=\"act in actividad\"\r\n                            :key=\"act.idActPri\"\r\n                        >\r\n                            {{ act.nombreActPri }}\r\n                        </v-tab>\r\n                    </v-tabs>\r\n                </template>\r\n            </v-toolbar>\r\n            <v-tabs-items v-model=\"tab\">\r\n                <v-tab-item\r\n                    v-for=\"(act, indexPri) in actividad\"\r\n                    :key=\"act.idActPri\"\r\n                >\r\n                    <v-card flat v-for=\"(actSec, indexSec) in actividad[indexPri].actividadSecundaria\" :key=\"actSec.idActSec\">\r\n                        <v-card-text>\r\n                            <span class=\"font-weight-bold\"> {{ actSec.nombreActSec }} </span>\r\n                            <v-container grid-list-md v-for=\"actTer in actividad[indexPri].actividadSecundaria[indexSec].actividadTerciaria\" :key=\"actTer.idActTer\">\r\n                                <v-layout wrap>\r\n                                    <v-flex xs12 sm6 md3 mt-3>\r\n                                        <span class=\"font-weight-bold\"> {{ actTer.nombreActTer }} </span>\r\n                                    </v-flex>\r\n                                    <v-flex xs12 sm6 md1>\r\n                                        <v-text-field v-model=\"actTer.cantidadActTer\" :rules=\"rules.validacionNumerica\" label=\"Dedicación\" @change=\"addCantidadActTer(actTer)\" outline>                                        \r\n                                        </v-text-field>\r\n                                    </v-flex>\r\n                                    <v-flex xs12 sm6 md5>\r\n                                        <v-text-field v-model=\"actTer.descripcionActTer\" label=\"Descripción\" @change=\"addDescripcionActTer(actTer.descripcionActTer, actTer.idActTer)\" outline>                                        \r\n                                        </v-text-field>\r\n                                    </v-flex>\r\n                                    <v-flex xs12 sm6 md3>\r\n                                        <v-select\r\n                                            v-model=\"actTer.productoSelect\"\r\n                                            :items=\"actTer.producto\"\r\n                                            item-text=\"nombrePro\"\r\n                                            item-value=\"idPro\"\r\n                                            label=\"Producto\"\r\n                                            dense\r\n                                            @change=\"addProductoActTer(actTer.productoSelect, actTer.idActTer)\"\r\n                                            outline>\r\n                                        </v-select>\r\n                                    </v-flex>\r\n                                </v-layout>\r\n                            </v-container>\r\n                        </v-card-text>\r\n                    </v-card>\r\n                </v-tab-item>\r\n            </v-tabs-items>\r\n            <template>\r\n                <v-container class=\"d-flex flex-wrap white lighten-5 \">\r\n                    <v-flex xs12 sm6 md2>\r\n                        <v-text-field v-model=\"cantidadSemanal\" :rules=\"rules.cantidadSemanaRule\" label=\"Total Cantidad Semanal\" outline readonly>                                        \r\n                        </v-text-field>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm6 md2 ml-2>\r\n                        <v-text-field v-model=\"cantidadSemestral\" :rules=\"rules.cantidadSemestralRule\" label=\"Total Cantidad Semestral\" outline readonly>                                        \r\n                        </v-text-field>\r\n                    </v-flex>\r\n                    <v-flex xs12 sm6 md2 ml-2 mt-1>\r\n                        <v-btn color=\"primary\" @click=\"registrarAgenda()\">Registrar Agenda</v-btn>\r\n                    </v-flex>\r\n                </v-container>\r\n            </template>\r\n        </v-flex>\r\n    </v-layout>\r\n</template>\r\n<script>\r\n    import axios from 'axios';\r\n    import Swal from 'sweetalert2';\r\n    import moment from 'moment';\r\n    export default {\r\n        data(){\r\n            return {\r\n                tab: 0,\r\n                registro: false,\r\n                actividad: [],\r\n                actividadPrimaria: [],\r\n                actividadSecundaria: [],\r\n                actividadTerciaria: [],\r\n                productoActividadTerciaria: [],\r\n                actividadAdd: [],\r\n                periodoAcademicos: [],\r\n                facultades: [],\r\n                programas: [],\r\n                docencia: [],\r\n                asignaturas: [],\r\n                sedes: [],\r\n                cantidadSemanal: 0,\r\n                cantidadSemestral: 0,\r\n                periodoAcamdemico: \"\",\r\n                nombreCompletoDocente: this.$store.state.usuario.nombre,\r\n                fechaActualAgenda: moment().format('YYYY-MM-DD'),\r\n                facultad: this.$store.state.usuario.facultad_id,\r\n                programa: this.$store.state.usuario.programa_id,\r\n                rules: {\r\n                    cantidadSemanaRule: [\r\n                        v => (v < 40) || 'La cantidad de horas semanales no debe ser mayor a 40',\r\n                    ],\r\n                    cantidadSemestralRule: [\r\n                        v => (v < 720) || 'La cantidad de horas semestrales no debe ser mayor a 720',\r\n                    ],\r\n                    validacionNumerica: [\r\n                        v => /^[0-9]+$/.test(v) || 'Valores númericos'\r\n                    ]\r\n                },\r\n                informacionDocencia: {\r\n                    asignatura: \"\",\r\n                    programa: \"\",\r\n                    grupo: \"\",\r\n                    sede: \"\",\r\n                    dedicacionPresencialSemanal: \"\",\r\n                    dedicacionSemestral: \"\"\r\n                },\r\n                docenciaInformacion: {\r\n                    asignatura: \"\",\r\n                    programa: \"\",\r\n                    grupo: \"\",\r\n                    sede: \"\",\r\n                    dedicacionPresencialSemanal: \"\",\r\n                    dedicacionSemestral: \"\"\r\n                },\r\n                agendaSemestral: {},\r\n            }\r\n        },\r\n        created () {\r\n            this.agendaSemestralRegistro();\r\n            this.pushDocencia();\r\n            this.indexAsignatura();\r\n            this.indexSede();\r\n            this.periodoAcademicoIndex();\r\n            this.facultadIndex();\r\n            this.programaIndex();\r\n            this.indexActividadPrimaria();\r\n            this.indexActividadSecundaria();\r\n            this.indexActividadTerciario();\r\n            this.indexProductoActividadTerciaria();\r\n        },\r\n        methods: {\r\n            agendaSemestralRegistro(){\r\n                let me = this;         \r\n                axios.get(`agenda-semestral/searchUserIdAndPeriodo/${this.$store.state.usuario.id}/1`).then(function (response){\r\n                    if(response.data.length > 0){\r\n                        me.registro = true;\r\n                        Swal.fire({\r\n                            title: '¡Buen Trabajo!',\r\n                            text: 'La agenda semestral ya ha sido registrada.',\r\n                            imageUrl: require('./../assets/Logo.jpg'),\r\n                        });\r\n                    }\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            registrarAgenda(){\r\n                if(this.cantidadSemanal == 40){\r\n                    let me = this;         \r\n                    \r\n                    me.agendaSemestral.idDocente = this.$store.state.usuario.id;\r\n                    me.agendaSemestral.actividadTerciaria = me.actividadAdd;\r\n                    me.agendaSemestral.docencia = me.docencia;\r\n                    me.agendaSemestral.facultad = me.facultad;\r\n                    me.agendaSemestral.programa = me.programa;\r\n                    me.agendaSemestral.fecha = me.fechaActualAgenda;\r\n                    me.agendaSemestral.periodoAcademico = me.periodoAcamdemico;\r\n\r\n                    axios.post('agenda-semestral/registrar-agenda', me.agendaSemestral).then(function (response){\r\n                        Swal.fire(\r\n                            '¡Buen Trabajo!',\r\n                            response.data.message,\r\n                            'success'\r\n                        );\r\n                    }).catch(function(error){\r\n                        console.log(error);\r\n                    });\r\n                }else{\r\n                    Swal.fire(\r\n                        '¡Revisar!',\r\n                        'La cantidad de horas semanales debe ser igual a 40',\r\n                        'error'\r\n                    )\r\n                }\r\n            },\r\n            dedicacionSemanalDocencia(cantidad, asignatura, grupo){\r\n                this.docencia.map(function (docencia){\r\n                    if(docencia.asignatura == asignatura && docencia.grupo == grupo){\r\n                        docencia.dedicacionSemestral = cantidad * 18;\r\n                    }\r\n                })\r\n            },\r\n            pushDocencia(){\r\n                this.docencia.push(this.informacionDocencia);\r\n            },\r\n            pushDocenciaInformacion(){\r\n                this.docencia.push(this.docenciaInformacion);\r\n            },\r\n            periodoAcademicoIndex(){\r\n                let me = this;         \r\n                axios.get('periodo-academico/index').then(function (response){\r\n                    me.periodoAcademicos = response.data;\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            facultadIndex(){\r\n                let me = this;         \r\n                axios.get('facultad/index').then(function (response){\r\n                    me.facultades = response.data;\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            programaIndex(){\r\n                let me = this;         \r\n                axios.get('programa/index').then(function (response){\r\n                    me.programas = response.data;\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            indexAsignatura(){\r\n                let me = this;         \r\n                axios.get('asignatura/index').then(function (response){\r\n                    me.asignaturas = response.data;\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            indexSede(){\r\n                let me = this;         \r\n                axios.get('sede/index').then(function (response){\r\n                    me.sedes = response.data;\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            addProductoActTer(producto, id){\r\n                let me = this;\r\n                me.actividadAdd.map(function(actividadAdd){\r\n                    if(actividadAdd.idActTer == id){\r\n                        actividadAdd.productoSelect = producto;\r\n                    }\r\n                });\r\n            },\r\n            addDescripcionActTer(descripcion, id){\r\n                let me = this;\r\n                me.actividadAdd.map(function(actividadAdd){\r\n                    if(actividadAdd.idActTer == id){\r\n                        actividadAdd.descripcionActTer = descripcion;\r\n                    }\r\n                });\r\n            },\r\n            addCantidadActTer(actTer){\r\n                let me = this;\r\n                if(actTer.cantidadActTer > 0){\r\n                    me.actividad.map(function(actividad){\r\n                        actividad.actividadSecundaria.map(function(actividadSecundaria){\r\n                            actividadSecundaria.actividadTerciaria.map(function(actividadTerciaria){\r\n                                if(actividadTerciaria.idActTer == actTer.idActTer){\r\n                                    actividadTerciaria.dedicacionActTer = actTer.cantidadActTer * 18;\r\n                                }\r\n                            });\r\n                        });\r\n                    });\r\n\r\n                    me.actividadAdd.push(actTer);\r\n                }else{\r\n                    let position = me.actividadAdd.indexOf(actTer);\r\n                    me.actividadAdd.splice(position, 1);\r\n                }\r\n\r\n                me.cantidadSemanal = 0;\r\n                me.cantidadSemestral = 0;\r\n                me.actividadAdd.map(function(actividadAdd){\r\n                    me.cantidadSemanal = parseInt(me.cantidadSemanal) + parseInt(actividadAdd.cantidadActTer);\r\n                    me.cantidadSemestral = parseInt(me.cantidadSemestral) + parseInt(actividadAdd.dedicacionActTer);\r\n                })\r\n            },\r\n            indexActividadPrimaria(){\r\n                let me = this;         \r\n                axios.get('actividad-primaria/index').then(function (response){\r\n                    me.actividadPrimaria = response.data;\r\n                    me.actividadPrimaria.map(function(actividadPrimaria){\r\n                        me.actividad.push(\r\n                            {\r\n                                idActPri: actividadPrimaria.id, \r\n                                nombreActPri: actividadPrimaria.nombre\r\n                            }\r\n                        );\r\n                    });\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            indexActividadSecundaria(){\r\n                let me = this;         \r\n                axios.get('actividad-secundaria/index').then(function (response){\r\n                    me.actividadSecundaria = response.data;\r\n                    me.actividad.map(function(actividad, index){\r\n                        actividad.actividadSecundaria = [];\r\n                        me.actividadSecundaria.map(function(actividadSecundaria){\r\n                            if(actividad.idActPri == actividadSecundaria.actividad_primaria_id){\r\n                                actividad.actividadSecundaria.push(\r\n                                    {\r\n                                        idActSec: actividadSecundaria.id, \r\n                                        nombreActSec: actividadSecundaria.nombre\r\n                                    }\r\n                                );\r\n                            }\r\n                        });\r\n                    });\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            indexActividadTerciario(){\r\n                let me = this;         \r\n                axios.get('actividad-terciaria/index').then(function (response){\r\n                    me.actividadTerciaria = response.data;\r\n                    me.actividad.map(function(actividad, index){\r\n                        if(actividad.actividadSecundaria.length > 0){\r\n                            actividad.actividadSecundaria.map(function(actividadSecundaria){\r\n                                actividadSecundaria.actividadTerciaria = [];\r\n                            });\r\n                        }else{\r\n                            actividad.actividadSecundaria.push([]);\r\n                            actividad.actividadSecundaria[0].actividadTerciaria = [];\r\n                        }\r\n\r\n                        actividad.actividadSecundaria.map(function(actividadSecundaria){\r\n                            me.actividadTerciaria.map(function(actividadTerciaria){\r\n                                if(actividad.idActPri == actividadTerciaria.actividad_primaria_id && \r\n                                    actividadSecundaria.idActSec == actividadTerciaria.actividad_secundaria_id){\r\n                                    actividadSecundaria.actividadTerciaria.push(\r\n                                        {\r\n                                            idActTer: actividadTerciaria.id, \r\n                                            nombreActTer: actividadTerciaria.nombre,\r\n                                            cantidadActTer: 0,\r\n                                            productoSelect: '',\r\n                                            descripcionActTer: ''\r\n                                        }\r\n                                    );  \r\n                                }else if(actividad.idActPri == actividadTerciaria.actividad_primaria_id && \r\n                                    actividadSecundaria.idActSec == null){\r\n                                    actividadSecundaria.actividadTerciaria.push(\r\n                                        {\r\n                                            idActTer: actividadTerciaria.id, \r\n                                            nombreActTer: actividadTerciaria.nombre,\r\n                                            cantidadActTer: 0,\r\n                                            productoSelect: '',\r\n                                            descripcionActTer: ''\r\n                                        }\r\n                                    );  \r\n                                }\r\n                            })\r\n\r\n                        });\r\n                    });\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n            indexProductoActividadTerciaria(){\r\n                let me = this;         \r\n                axios.get('producto-actividad-terciaria/index').then(function (response){\r\n                    me.productoActividadTerciaria = response.data;\r\n                    me.actividad.map(function(actividad){\r\n                        actividad.actividadSecundaria.map(function(actividadSecundaria){\r\n                            actividadSecundaria.actividadTerciaria.map(function(actividadTerciaria){\r\n                                actividadTerciaria.producto = [];\r\n                                actividadTerciaria.dedicacionActTer = 0;\r\n                                me.productoActividadTerciaria.map(function(productoActividadTerciaria){\r\n                                    if(productoActividadTerciaria.actividad_terciaria_id == actividadTerciaria.idActTer){\r\n                                        actividadTerciaria.producto.push(\r\n                                            {\r\n                                                idPro: productoActividadTerciaria.id, \r\n                                                codigoPro: productoActividadTerciaria.codigo,\r\n                                                nombrePro: productoActividadTerciaria.nombre,\r\n                                            }\r\n                                        );  \r\n                                    }\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                }).catch(function(error){\r\n                    console.log(error);\r\n                });\r\n            },\r\n        }\r\n    }\r\n</script>"]}]}